{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rosic\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\UNIVESP\\\\gerenciadorTarefas\\\\gerenciador-tarefas\\\\src\\\\Pages\\\\Dashboard\\\\dashboardTarefas.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport FormularioTarefa from \"./formularioTarefa\";\nimport ListaTarefas from \"\";\nimport { supabase } from \"../supabaseClient\";\nimport \"../styles/DashboardTarefas.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DashboardTarefas() {\n  _s();\n  const [tarefas, setTarefas] = useState([]);\n  const [mostrarFormulario, setMostrarFormulario] = useState(false);\n  const [tarefaEditando, setTarefaEditando] = useState(null);\n  const [usuarioId, setUsuarioId] = useState(null);\n  useEffect(() => {\n    const obterUsuario = async () => {\n      const {\n        data: userData,\n        error\n      } = await supabase.auth.getUser();\n      const user = userData === null || userData === void 0 ? void 0 : userData.user;\n      if (user) {\n        setUsuarioId(user.id);\n        carregarTarefas(user.id);\n      } else {\n        console.error(\"Usuário não autenticado\", error);\n      }\n    };\n    obterUsuario();\n  }, []);\n  const carregarTarefas = async iduser => {\n    const {\n      data,\n      error\n    } = await supabase.from(\"tarefas\").select(\"*\").eq(\"iduser\", iduser).order(\"created_at\", {\n      ascending: false\n    });\n    if (error) {\n      console.error(\"Erro ao carregar tarefas:\", error.message);\n    } else {\n      setTarefas(data);\n    }\n  };\n  const salvarTarefa = async tarefa => {\n    if (!usuarioId) return;\n    if (tarefaEditando) {\n      await supabase.from(\"tarefas\").update({\n        titulo: tarefa.titulo,\n        descricao: tarefa.descricao,\n        prioridade: tarefa.prioridade,\n        status: tarefa.status,\n        updated_at: new Date()\n      }).eq(\"idtarf\", tarefa.idtarf);\n    } else {\n      await supabase.from(\"tarefas\").insert([{\n        titulo: tarefa.titulo,\n        descricao: tarefa.descricao,\n        prioridade: tarefa.prioridade,\n        status: tarefa.status,\n        iduser: usuarioId\n      }]);\n    }\n    setTarefaEditando(null);\n    setMostrarFormulario(false);\n    carregarTarefas(usuarioId);\n  };\n  const excluirTarefa = async id => {\n    await supabase.from(\"tarefas\").delete().eq(\"idtarf\", id);\n    carregarTarefas(usuarioId);\n  };\n  const editarTarefa = tarefa => {\n    setTarefaEditando(tarefa);\n    setMostrarFormulario(true);\n  };\n  const alternarConclusao = async (id, statusAtual) => {\n    const novoStatus = statusAtual === \"concluída\" ? \"pendente\" : \"concluída\";\n    await supabase.from(\"tarefas\").update({\n      status: novoStatus\n    }).eq(\"idtarf\", id);\n    carregarTarefas(usuarioId);\n  };\n  const progresso = tarefas.length > 0 ? tarefas.filter(t => t.status === \"concluída\").length / tarefas.length * 100 : 0;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-tarefas\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cabecalho\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Minhas Tarefas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"botao-nova\",\n        onClick: () => {\n          setTarefaEditando(null);\n          setMostrarFormulario(!mostrarFormulario);\n        },\n        children: \"+ Nova Tarefa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progresso\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Progresso do Projeto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"progress\", {\n        value: progresso,\n        max: \"100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), mostrarFormulario && /*#__PURE__*/_jsxDEV(FormularioTarefa, {\n      onSalvar: salvarTarefa,\n      tarefa: tarefaEditando\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ListaTarefas, {\n      tarefas: tarefas,\n      onExcluir: excluirTarefa,\n      onEditar: editarTarefa,\n      onToggleConclusao: (id, status) => alternarConclusao(id, status)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n_s(DashboardTarefas, \"a9Qb/eKXDT6xhELdDEemcJ/JSnk=\");\n_c = DashboardTarefas;\nvar _c;\n$RefreshReg$(_c, \"DashboardTarefas\");","map":{"version":3,"names":["useEffect","useState","FormularioTarefa","ListaTarefas","supabase","jsxDEV","_jsxDEV","DashboardTarefas","_s","tarefas","setTarefas","mostrarFormulario","setMostrarFormulario","tarefaEditando","setTarefaEditando","usuarioId","setUsuarioId","obterUsuario","data","userData","error","auth","getUser","user","id","carregarTarefas","console","iduser","from","select","eq","order","ascending","message","salvarTarefa","tarefa","update","titulo","descricao","prioridade","status","updated_at","Date","idtarf","insert","excluirTarefa","delete","editarTarefa","alternarConclusao","statusAtual","novoStatus","progresso","length","filter","t","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","value","max","onSalvar","onExcluir","onEditar","onToggleConclusao","_c","$RefreshReg$"],"sources":["C:/Users/rosic/OneDrive/Área de Trabalho/UNIVESP/gerenciadorTarefas/gerenciador-tarefas/src/Pages/Dashboard/dashboardTarefas.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport FormularioTarefa from \"./formularioTarefa\";\r\nimport ListaTarefas from \"\"\r\nimport { supabase } from \"../supabaseClient\";\r\nimport \"../styles/DashboardTarefas.css\";\r\n\r\nexport default function DashboardTarefas() {\r\n  const [tarefas, setTarefas] = useState([]);\r\n  const [mostrarFormulario, setMostrarFormulario] = useState(false);\r\n  const [tarefaEditando, setTarefaEditando] = useState(null);\r\n  const [usuarioId, setUsuarioId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const obterUsuario = async () => {\r\n      const { data: userData, error } = await supabase.auth.getUser();\r\n      const user = userData?.user;\r\n\r\n      if (user) {\r\n        setUsuarioId(user.id);\r\n        carregarTarefas(user.id);\r\n      } else {\r\n        console.error(\"Usuário não autenticado\", error);\r\n      }\r\n    };\r\n\r\n    obterUsuario();\r\n  }, []);\r\n\r\n  const carregarTarefas = async (iduser) => {\r\n    const { data, error } = await supabase\r\n      .from(\"tarefas\")\r\n      .select(\"*\")\r\n      .eq(\"iduser\", iduser)\r\n      .order(\"created_at\", { ascending: false });\r\n\r\n    if (error) {\r\n      console.error(\"Erro ao carregar tarefas:\", error.message);\r\n    } else {\r\n      setTarefas(data);\r\n    }\r\n  };\r\n\r\n  const salvarTarefa = async (tarefa) => {\r\n    if (!usuarioId) return;\r\n\r\n    if (tarefaEditando) {\r\n      await supabase\r\n        .from(\"tarefas\")\r\n        .update({\r\n          titulo: tarefa.titulo,\r\n          descricao: tarefa.descricao,\r\n          prioridade: tarefa.prioridade,\r\n          status: tarefa.status,\r\n          updated_at: new Date(),\r\n        })\r\n        .eq(\"idtarf\", tarefa.idtarf);\r\n    } else {\r\n      await supabase.from(\"tarefas\").insert([\r\n        {\r\n          titulo: tarefa.titulo,\r\n          descricao: tarefa.descricao,\r\n          prioridade: tarefa.prioridade,\r\n          status: tarefa.status,\r\n          iduser: usuarioId,\r\n        },\r\n      ]);\r\n    }\r\n\r\n    setTarefaEditando(null);\r\n    setMostrarFormulario(false);\r\n    carregarTarefas(usuarioId);\r\n  };\r\n\r\n  const excluirTarefa = async (id) => {\r\n    await supabase.from(\"tarefas\").delete().eq(\"idtarf\", id);\r\n    carregarTarefas(usuarioId);\r\n  };\r\n\r\n  const editarTarefa = (tarefa) => {\r\n    setTarefaEditando(tarefa);\r\n    setMostrarFormulario(true);\r\n  };\r\n\r\n  const alternarConclusao = async (id, statusAtual) => {\r\n    const novoStatus = statusAtual === \"concluída\" ? \"pendente\" : \"concluída\";\r\n    await supabase.from(\"tarefas\").update({ status: novoStatus }).eq(\"idtarf\", id);\r\n    carregarTarefas(usuarioId);\r\n  };\r\n\r\n  const progresso =\r\n    tarefas.length > 0\r\n      ? (tarefas.filter((t) => t.status === \"concluída\").length / tarefas.length) * 100\r\n      : 0;\r\n\r\n  return (\r\n    <div className=\"dashboard-tarefas\">\r\n      <div className=\"cabecalho\">\r\n        <h2>Minhas Tarefas</h2>\r\n        <button\r\n          className=\"botao-nova\"\r\n          onClick={() => {\r\n            setTarefaEditando(null);\r\n            setMostrarFormulario(!mostrarFormulario);\r\n          }}\r\n        >\r\n          + Nova Tarefa\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"progresso\">\r\n        <label>Progresso do Projeto</label>\r\n        <progress value={progresso} max=\"100\" />\r\n      </div>\r\n\r\n      {mostrarFormulario && (\r\n        <FormularioTarefa\r\n          onSalvar={salvarTarefa}\r\n          tarefa={tarefaEditando}\r\n        />\r\n      )}\r\n\r\n      <ListaTarefas\r\n        tarefas={tarefas}\r\n        onExcluir={excluirTarefa}\r\n        onEditar={editarTarefa}\r\n        onToggleConclusao={(id, status) => alternarConclusao(id, status)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}